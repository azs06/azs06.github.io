---
import MainLayout from "../layouts/MainLayout.astro";
import BlogCard from "../components/BlogCard.astro";
import { getCollection } from "astro:content";
import { SAAS_PRODUCTS } from "../consts";

// Fetch 3 most recent blog posts
const recentPosts = (await getCollection("blog"))
  .sort((a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf())
  .slice(0, 3);
---

<MainLayout title="Home - Atiquzzaman Soikat">
  <article class="space-y-16">
    <!-- Hero Section - Left aligned -->
    <section class="section-animate">
      <div>
        <p class="text-xl text-primary dark:text-gray-200 mb-6 font-semibold">
          Senior Full Stack Developer · Team Lead
        </p>

        <div class="space-y-4 text-primary/80 dark:text-gray-300 text-lg">
          <p>
            I'm a senior full‑stack engineer who ships web products end‑to‑end—from
            accessible frontends to reliable services and the CI/CD pipelines that
            support them. I work mostly with TypeScript, React and Go, and I care
            deeply about performance, real‑time data and smooth developer workflows.
          </p>
        </div>

        <!-- CTA Buttons -->
        <div class="flex flex-wrap gap-3 mt-8">
          <a
            href="/work"
            class="btn-press inline-flex items-center px-5 py-2.5 text-sm font-medium text-white bg-accent dark:bg-accent rounded-lg hover:bg-accent/90 dark:hover:bg-accent/90 transition-colors"
          >
            View Work
          </a>
          <a
            href="/contact"
            class="btn-press inline-flex items-center px-5 py-2.5 text-sm font-medium text-primary dark:text-gray-200 border border-border dark:border-[#3d352d] rounded-lg hover:border-accent dark:hover:border-accent transition-colors"
          >
            Contact
          </a>
        </div>
      </div>
    </section>

    <!-- What I Work On Section -->
    <section class="section-animate">
      <h2
        class="text-sm font-medium text-muted dark:text-gray-400 uppercase tracking-wider mb-4 font-sans"
      >
        What I Work On
      </h2>
      <div class="space-y-3 text-primary/80 dark:text-gray-300">
        <p>
          <span class="font-medium text-primary dark:text-gray-100"
            >Product UIs</span
          > — Accessible React/Svelte frontends with a focus on performance and real-time
          interactions.
        </p>
        <p>
          <span class="font-medium text-primary dark:text-gray-100"
            >Services</span
          > — Go and Node.js APIs geared towards clear contracts, observability and
          stability.
        </p>
        <p>
          <span class="font-medium text-primary dark:text-gray-100">DevOps</span
          > — Dockerised services, CI/CD pipelines and cloud infrastructure that
          make deployments boring and repeatable.
        </p>
      </div>
    </section>

    <!-- SaaS Products Section -->
    <section class="section-animate">
      <h2
        class="text-sm font-medium text-muted dark:text-gray-400 uppercase tracking-wider mb-4 font-sans"
      >
        Products I've Built
      </h2>
      <div class="grid gap-4 md:grid-cols-2">
        {
          SAAS_PRODUCTS.map((product, index) => (
            <a
              href={`/products/${product.slug}`}
              class="stagger-item card-lift group block p-4 border border-border dark:border-[#3d352d] rounded-lg bg-paper/50 dark:bg-[#2a2520]/50 hover:border-accent/50 dark:hover:border-accent/50"
            >
              <h3 class="font-medium text-primary dark:text-gray-100 group-hover:text-accent dark:group-hover:text-accent transition-colors font-serif">
                {product.name}
              </h3>
              <p class="text-sm text-muted dark:text-gray-400 mt-1">
                {product.description}
              </p>
            </a>
          ))
        }
      </div>
    </section>

    <!-- Recent Blog Posts Section -->
    <section class="section-animate">
      <div class="flex items-center justify-between mb-4">
        <h2
          class="text-sm font-medium text-muted dark:text-gray-400 uppercase tracking-wider font-sans"
        >
          Recent Posts
        </h2>
        <a
          href="/blog"
          class="text-sm text-accent hover:underline font-sans link-underline"
        >
          View all →
        </a>
      </div>
      <div class="grid gap-6 md:grid-cols-3">
        {recentPosts.map((post) => <BlogCard post={post} />)}
      </div>
    </section>
  </article>
</MainLayout>
