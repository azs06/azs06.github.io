---
import MainLayout from "../layouts/MainLayout.astro";
import BlogCard from "../components/BlogCard.astro";
import { getCollection } from "astro:content";
import { TECHNOLOGIES, SAAS_PRODUCTS } from "../consts";

// Fetch 3 most recent blog posts
const recentPosts = (await getCollection("blog"))
  .sort((a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf())
  .slice(0, 3);
---

<MainLayout title="Home - Atiquzzaman Soikat">
  <article class="space-y-16">
    <!-- Hero Section - Left aligned -->
    <section class="section-animate">
      <div>
        <h1 class="text-4xl md:text-5xl font-bold text-primary dark:text-gray-100 mb-3 font-serif">
          Md Atiquzzaman Soikat
        </h1>
        <p class="text-lg text-muted dark:text-gray-400 mb-6 font-serif italic">
          Senior Full Stack Developer · Team Lead
        </p>
        
        <div class="space-y-4 text-primary/80 dark:text-gray-300">
          <p>
            I am a software developer with more than twelve years of experience
            focused on web technologies. My career has spanned diverse sectors,
            including education, hospitality, and most recently, retail.
          </p>
          <p>
            While my primary expertise lies in frontend development, I have
            progressively transitioned towards full-stack development and am
            actively cultivating expertise in DevOps.
          </p>
        </div>

        <!-- CTA Buttons -->
        <div class="flex flex-wrap gap-3 mt-8">
          <a
            href="/work"
            class="btn-press inline-flex items-center px-5 py-2.5 text-sm font-medium text-white bg-accent dark:bg-accent rounded-lg hover:bg-accent/90 dark:hover:bg-accent/90 transition-colors"
          >
            View Work
          </a>
          <a
            href="/contact"
            class="btn-press inline-flex items-center px-5 py-2.5 text-sm font-medium text-primary dark:text-gray-200 border border-border dark:border-[#3d352d] rounded-lg hover:border-accent dark:hover:border-accent transition-colors"
          >
            Contact
          </a>
        </div>
      </div>
    </section>

    <!-- Technologies Section -->
    <section class="section-animate">
      <h2 class="text-sm font-medium text-muted dark:text-gray-400 uppercase tracking-wider mb-4 font-sans">
        Technologies
      </h2>
      <div class="flex flex-wrap gap-2">
        {TECHNOLOGIES.map((tech) => (
          <span class="pill-bounce px-3 py-1.5 text-sm text-primary/80 dark:text-gray-300 bg-surface dark:bg-[#2a2520] border border-border dark:border-[#3d352d] rounded-full cursor-default">
            {tech}
          </span>
        ))}
      </div>
    </section>

    <!-- SaaS Products Section -->
    <section class="section-animate">
      <h2 class="text-sm font-medium text-muted dark:text-gray-400 uppercase tracking-wider mb-4 font-sans">
        Products I've Built
      </h2>
      <div class="grid gap-4 md:grid-cols-2">
        {SAAS_PRODUCTS.map((product, index) => (
          <a
            href={product.url}
            target={product.url !== '#' ? '_blank' : undefined}
            rel={product.url !== '#' ? 'noopener noreferrer' : undefined}
            class="stagger-item card-lift group block p-4 border border-border dark:border-[#3d352d] rounded-lg bg-paper/50 dark:bg-[#2a2520]/50 hover:border-accent/50 dark:hover:border-accent/50"
          >
            <h3 class="font-medium text-primary dark:text-gray-100 group-hover:text-accent dark:group-hover:text-accent transition-colors font-serif">
              {product.name}
              {product.url !== '#' && (
                <svg class="inline-block w-4 h-4 ml-1 opacity-50" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"></path>
                </svg>
              )}
            </h3>
            <p class="text-sm text-muted dark:text-gray-400 mt-1">
              {product.description}
            </p>
          </a>
        ))}
      </div>
    </section>

    <!-- Recent Blog Posts Section -->
    <section class="section-animate">
      <div class="flex items-center justify-between mb-4">
        <h2 class="text-sm font-medium text-muted dark:text-gray-400 uppercase tracking-wider font-sans">
          Recent Posts
        </h2>
        <a href="/blog" class="text-sm text-accent hover:underline font-sans link-underline">
          View all →
        </a>
      </div>
      <div class="grid gap-6 md:grid-cols-3">
        {recentPosts.map((post) => (
          <BlogCard post={post} />
        ))}
      </div>
    </section>
  </article>
</MainLayout>
