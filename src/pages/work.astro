---
import MainLayout from "../layouts/MainLayout.astro";
const workProjects = [
  {
    id: 6,
    title: "DokanePos",
    description:
      "DokanePos is a 21st century POS application built using web technologies",
    projectUrl: "https://dokanepos.com",
    imageUrl: "https://dokanepos.com/Pictures/pos-terminal.png",
    company: "ReformedTech",
    tags: ["Next.js", "Laravel", "TypeScript"],
    companyUrl: "https://reformedtech.org",
  },
  {
    id: 1,
    title: "Skipper Booking Widget",
    description:
      "The Skipper Booking Engine empowers hotels to drive direct bookings, increase profits, and elevate guest satisfaction.",
    imageUrl:
      "https://res.cloudinary.com/theazs/image/upload/w_1000,ar_16:9,c_fill,g_auto,e_sharpen/v1737232766/personal-website/zabfcuvtplaxvl61kens.png",
    projectUrl: "https://www.skipperhospitality.com/",
    company: "Skipper Hospitality",
    tags: ["Svelte", "X-state", "TailwindCss", "Playwright", "Testing Library"],
    companyUrl: "https://www.skipperhospitality.com/",
  },
  {
    id: 2,
    title: "Journey east hampton Website",
    description:
      "As part of the development team, worked on developing the website for Journey eas hampton hotel, using our in house CMS and our custom built 11ty Framework",
    imageUrl:
      "https://res.cloudinary.com/theazs/image/upload/w_1000,ar_16:9,c_fill,g_auto,e_sharpen/v1737288922/personal-website/Screenshot_2025-01-19_at_6.13.58_PM_i7ii8h.png",
    projectUrl: "https://journeyeasthampton.com/",
    company: "Skipper Hospitality",
    tags: ["11ty", "Node.js", "React", "TailwindCss", "Webcomponents"],
    companyUrl: "https://www.skipperhospitality.com/",
  },
  {
    id: 3,
    title: "Marram Montauk Hotel Website",
    description:
      "As part of the development team, worked on developing the website for Marram Montauk Hotel, using our in house CMS and our custom built 11ty Framework. We mainted a great lighthouse score even though we are loading a video on the home page by progressive loading strategy.",
    imageUrl:
      "https://res.cloudinary.com/theazs/image/upload/w_1000,ar_16:9,c_fill,g_auto,e_sharpen/v1737289055/personal-website/Screenshot_2025-01-19_at_6.17.08_PM_lgx7xg.png",
    projectUrl: "https://www.marrammontauk.com/",
    company: "Skipper Hospitality",
    tags: ["11ty", "Node.js", "React", "TailwindCss", "Webcomponents"],
    companyUrl: "https://www.skipperhospitality.com/",
  },
  {
    id: 4,
    title: "Theamswell Hotel Website",
    description:
      "We developed the themaswell hotel website using our in house component library that we have developed to be used with 11ty and our in house CMS as backend.",
    imageUrl:
      "https://res.cloudinary.com/theazs/image/upload/w_1000,ar_16:9,c_fill,g_auto,e_sharpen/v1737289413/personal-website/Screenshot_2025-01-19_at_6.22.57_PM_r1rbez.png",
    projectUrl: "https://www.theameswellhotel.com/",
    company: "Skipper Hospitality",
    tags: ["11ty", "Node.js", "React", "TailwindCss", "Webcomponents"],
    companyUrl: "https://www.skipperhospitality.com/",
  },
  {
    id: 5,
    title: "ButlerMenu.com",
    description:
      "ButlerMenu.com later Orderbutler.com was the defacto application for ordering foods, beverages and other commodities for hotel guests who had partnership with Butler Hospitality",
    imageUrl:
      "https://res.cloudinary.com/theazs/image/upload/w_1000,ar_16:9,c_fill,g_auto,e_sharpen/v1737299543/personal-website/Screenshot_2025-01-19_at_9.12.02_PM_ksvkmn.png",
    projectUrl: "",
    company: "Butler Hospitality",
    tags: ["React.js", "Flow.js", "TailwindCss", "Redux"],
    companyUrl: "https://www.crunchbase.com/organization/butler-hospitality",
  },
];

const experiences = [
  {
    company: "Jetaport",
    role: "Frontend Engineer",
    duration: "2015 - 2018",
    description:
      "Worked as frontend engineer in developing our group booking platform, and other internal applications.",
    companyUrl: "https://www.jetaport.com",
  },
  {
    company: "Butler Hospitality",
    role: "Senior Frontend Engineer & Team Lead",
    duration: "2019 - 2022",
    description:
      "Worked as a senior developer for several key projects, Worked on mobile and iPad application development, also on the internal OMS application.",
    companyUrl: "https://www.butlerhospitality.com",
  },
  {
    company: "Skipper Hospitality",
    role: "Senior Frontend Engineer & Team Lead",
    duration: "2022 - 2024",
    description:
      "Lead the development of Skipper Booking Widget, worked as a senior engineer for several client websites and key internal projects.",
    companyUrl: "https://www.skipperhospitality.com",
  },
  {
    company: "ReformedTech",
    role: "CTO and Co-Founder",
    duration: "2021 - Present",
    description:
      "ReformedTech is a Software Development company from Bangladesh, I lead the tech team with various efforts, one of our most notable project being DokanePos, a 21st Century pos application.",
    companyUrl: "https://www.reformedtech.org",
  },
];
---

<MainLayout
  title="Projects"
  description="A list of projects I have worked on"
  pubDate={new Date("August 08 2021")}
  heroImage="/blog-placeholder-about.jpg"
>
  <section class="mb-8">
    <h2 class="text-2xl font-bold mb-4">Work Experience</h2>
    <p class="text-lg leading-relaxed">
      I have over twelve years of experience in web development, serving as a
      Technical Project Manager, Frontend Engineer, and Team Lead for startups
      such as Jetaport, Butler Hospitality, and Skipper Hospitality.
      Additionally, I have worked as a freelancer, managing my own clients. My
      approach centers on inspiring teams to write clean, iterative, and
      maintainable code that aligns with real user experiences while achieving
      business objectives. In my own development work, I prioritize semantic,
      elegant, and maintainable code that is responsive and accessible.
    </p>
  </section>
  <!-- Work Experience -->
  <section class="mb-12">
    <ul class="space-y-6">
      {
        experiences.reverse().map((exp) => (
          <li class="p-4 border rounded-md hover:shadow transition-shadow">
            <a
              href={exp.companyUrl}
              target="_blank"
              class="text-xl font-semibold text-blue-600 hover:underline"
            >
              {exp.company}
            </a>
            <p class="text-gray-600">
              {exp.role} &middot; {exp.duration}
            </p>
            <p class="mt-2 text-gray-700">{exp.description}</p>
          </li>
        ))
      }
    </ul>
  </section>
  <!-- Recent Work Projects -->
  <section class="mb-12">
    <h2 class="text-2xl font-bold mb-4">Recent Work Projects</h2>
    <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6">
      {
        workProjects.map((project) => (
          <article
            class="work-project-card border border-1px border-solid border-[var(--border)] rounded-md p-4 hover:shadow-lg transition-shadow flex flex-col relative overflow-hidden"
            data-tilt
            style="--drop-color: rgba(65, 105, 225, 0.15); --drop-x: 50%; --drop-y: 50%;"
          >
            <img
              src={project.imageUrl}
              alt={project.title}
              class="w-full h-48 object-cover mb-4 rounded cursor-pointer"
              data-modal-image
              data-project-url={project.projectUrl || ''}
              data-iframe-enabled={project.id !== 6 && project.id !== 1 ? 'true' : 'false'}
            />
            <h3 class="text-lg font-semibold mb-2">{project.title}</h3>
            <p class="text-gray-700 text-sm/6 mb-2">{project.description}</p>
            <p class="text-sm text-gray-500 mb-2">
              Company:{" "}
              <a
                href={project.companyUrl}
                target="_blank"
                rel="noopener noreferrer"
                class="text-blue-600 hover:underline"
              >
                {project.company}
              </a>
            </p>
            <div class="flex flex-wrap gap-2 mb-4">
              {project.tags.map((tag, index) => (
                <span
                  key={index}
                  class="px-2 py-1 text-sm bg-gray-200 text-gray-700 rounded-md"
                >
                  {tag}
                </span>
              ))}
            </div>
            {project.projectUrl && (
              <a
                href={project.projectUrl}
                target="_blank"
                rel="noopener noreferrer"
                class="inline-flex items-center px-4 py-2 mt-auto bg-black bg-opacity-80 text-white rounded-md hover:bg-inherit border-1 hover:text-black hover:shadow-[0_0_15px_rgba(59,130,246,0.5)] transition-colors transform hover:-translate-y-1 duration-200 shadow-md group"
              >
                <span class="text-sm/5">View Project</span>
                <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 ml-2 transform group-hover:translate-x-1 transition-transform" viewBox="0 0 20 20" fill="currentColor">
                  <path fill-rule="evenodd" d="M10.293 5.293a1 1 0 011.414 0l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414-1.414L12.586 11H5a1 1 0 110-2h7.586l-2.293-2.293a1 1 0 010-1.414z" clip-rule="evenodd" />
                </svg>
              </a>
            )}
          </article>
        ))
      }
    </div>
  </section>
  <section class="bg-gray-100 py-12">
    <div class="max-w-5xl mx-auto px-4">
      <header class="text-center mb-8">
        <h2 class="text-3xl font-bold text-gray-800">Freelance Projects</h2>
        <p class="text-lg text-gray-600 mt-2">
          A showcase of my freelance client projects. Click on any project to
          learn more.
        </p>
      </header>
      <ul class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-6">
        <li class="bg-white p-6 rounded-lg shadow hover:shadow-lg transition">
          <a
            href="https://nini-designs.com/"
            target="_blank"
            rel="noopener noreferrer"
            class="block"
          >
            <h3 class="text-xl font-semibold text-blue-600 hover:underline">
              Nini Design
            </h3>
            <p class="text-gray-500 mt-2">Shopify Clothing Store.</p>
          </a>
        </li>
        <li class="bg-white p-6 rounded-lg shadow hover:shadow-lg transition">
          <a
            href="https://www.bobbylondonsf.com/"
            target="_blank"
            rel="noopener noreferrer"
            class="block"
          >
            <h3 class="text-xl font-semibold text-blue-600 hover:underline">
              Bobby London
            </h3>
            <p class="text-gray-500 mt-2">Shopify Clothing Store.</p>
          </a>
        </li>
        <li class="bg-white p-6 rounded-lg shadow hover:shadow-lg transition">
          <a
            href="https://www.jardindedenclo.com/"
            target="_blank"
            rel="noopener noreferrer"
            class="block"
          >
            <h3 class="text-xl font-semibold text-blue-600 hover:underline">
              JARDIN D'EDEN
            </h3>
            <p class="text-gray-500 mt-2">Shopify Clothing Store.</p>
          </a>
        </li>
        <li class="bg-white p-6 rounded-lg shadow hover:shadow-lg transition">
          <a
            href="https://sunfruitfarms.com/"
            target="_blank"
            rel="noopener noreferrer"
            class="block"
          >
            <h3 class="text-xl font-semibold text-blue-600 hover:underline">
              Sunfruit Farms
            </h3>
            <p class="text-gray-500 mt-2">Jamstack Landing Page</p>
          </a>
        </li>
        <!-- Add more projects as needed -->
      </ul>
    </div>
  </section>
</MainLayout>

<!-- Modal for large images and iframes -->
<div id="imageModal" class="fixed inset-0 bg-black bg-opacity-75 z-50 flex items-center justify-center p-4 hidden">
  <div class="relative max-w-6xl w-full max-h-[90vh]">
    <button id="closeModal" class="absolute top-2 right-2 bg-white rounded-full p-2 text-black hover:bg-gray-200 transition-colors z-50">
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <line x1="18" y1="6" x2="6" y2="18"></line>
        <line x1="6" y1="6" x2="18" y2="18"></line>
      </svg>
    </button>
    
    <!-- Image content -->
    <div id="modalImageContent" class="hidden">
      <img id="modalImage" class="max-h-[80vh] max-w-full mx-auto rounded shadow-xl" src="" alt="Project image" />
      <p id="modalCaption" class="text-white text-center mt-4 text-lg"></p>
    </div>
    
    <!-- Iframe content -->
    <div id="modalIframeContent" class="hidden h-[80vh] w-full">
      <iframe id="modalIframe" class="w-full h-full bg-white rounded shadow-xl" src="" frameborder="0" allowfullscreen></iframe>
      <div class="flex justify-between items-center mt-4">
        <p id="modalIframeCaption" class="text-white text-lg"></p>
        <a id="modalExternalLink" href="" target="_blank" class="text-blue-400 hover:text-blue-300 transition-colors">
          Open in new tab
        </a>
      </div>
    </div>
  </div>
</div>

<style>
  .work-project-card {
    position: relative;
    overflow: hidden;
    transition: transform 0.3s cubic-bezier(0.17, 0.67, 0.83, 0.67);
    will-change: transform;
  }

  .work-project-card::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-image: radial-gradient(circle at var(--drop-x) var(--drop-y), var(--drop-color), transparent 70%);
    opacity: 0;
    transition: opacity 0.4s ease-out;
    z-index: 0;
    pointer-events: none;
  }

  .work-project-card:hover::before {
    opacity: 1;
  }

  .work-project-card > * {
    position: relative;
    z-index: 1;
    transition: transform 0.2s ease-out;
  }
  
  .work-project-card:hover > * {
    transform: translateZ(10px);
  }
</style>

<script>
  document.addEventListener('DOMContentLoaded', function() {
    const cards = document.querySelectorAll('[data-tilt]');
    const modal = document.getElementById('imageModal');
    const modalImage = document.getElementById('modalImage');
    const modalCaption = document.getElementById('modalCaption');
    const closeModal = document.getElementById('closeModal');
    
    // Handle tilt effect
    cards.forEach(card => {
      let timeout;
      
      card.addEventListener('mousemove', function(event) {
        const { left, top, width, height } = card.getBoundingClientRect();
        const x = (event.clientX - left - width / 2) / 90;
        const y = (event.clientY - top - height / 2) / 90;
        
        // Set the position for the radial gradient with smooth transition
        card.style.setProperty('--drop-x', `${event.clientX - left}px`);
        card.style.setProperty('--drop-y', `${event.clientY - top}px`);
        
        // Apply tilt effect
        card.style.transform = `perspective(1000px) rotateX(${-y}deg) rotateY(${x}deg) scale(1.02)`;
      });
      
      card.addEventListener('mouseleave', function() {
        // Add a slight delay before resetting for a smoother experience
        timeout = setTimeout(() => {
          card.style.transform = 'perspective(1000px) rotateX(0deg) rotateY(0deg) scale(1)';
        }, 100);
      });
      
      card.addEventListener('mouseenter', function() {
        clearTimeout(timeout);
      });
    });
    
    // Handle image modal
    const images = document.querySelectorAll('[data-modal-image]');
    const modalImageContent = document.getElementById('modalImageContent');
    const modalIframeContent = document.getElementById('modalIframeContent');
    const modalIframe = document.getElementById('modalIframe');
    const modalIframeCaption = document.getElementById('modalIframeCaption');
    const modalExternalLink = document.getElementById('modalExternalLink');
    
    images.forEach(img => {
      img.addEventListener('click', function() {
        const imageUrl = this.src;
        const projectTitle = this.closest('article').querySelector('h3').textContent;
        const projectUrl = this.getAttribute('data-project-url');
        const iframeEnabled = this.getAttribute('data-iframe-enabled') === 'true';
        
        // Reset modal content visibility
        modalImageContent.classList.add('hidden');
        modalIframeContent.classList.add('hidden');
        
        if (projectUrl && projectUrl.trim() !== '' && iframeEnabled) {
          // Display iframe for projects with URLs and iframe enabled
          modalIframe.src = projectUrl;
          modalIframeCaption.textContent = projectTitle;
          modalExternalLink.href = projectUrl;
          modalIframeContent.classList.remove('hidden');
        } else {
          // Display image for projects without URLs or with iframe disabled
          modalImage.src = imageUrl;
          modalCaption.textContent = projectTitle;
          modalImageContent.classList.remove('hidden');
        }
        
        modal.classList.remove('hidden');
        document.body.style.overflow = 'hidden'; // Prevent scrolling when modal is open
      });
    });
    
    // Close modal when clicking the close button
    closeModal.addEventListener('click', function() {
      modal.classList.add('hidden');
      document.body.style.overflow = ''; // Restore scrolling
      // Reset iframe src to stop any audio/video
      setTimeout(() => {
        modalIframe.src = '';
      }, 300);
    });
    
    // Close modal when clicking outside the content
    modal.addEventListener('click', function(event) {
      if (event.target === modal) {
        modal.classList.add('hidden');
        document.body.style.overflow = ''; // Restore scrolling
        // Reset iframe src to stop any audio/video
        setTimeout(() => {
          modalIframe.src = '';
        }, 300);
      }
    });
    
    // Close modal on escape key
    document.addEventListener('keydown', function(event) {
      if (event.key === 'Escape' && !modal.classList.contains('hidden')) {
        modal.classList.add('hidden');
        document.body.style.overflow = ''; // Restore scrolling
        // Reset iframe src to stop any audio/video
        setTimeout(() => {
          modalIframe.src = '';
        }, 300);
      }
    });
  });
</script>