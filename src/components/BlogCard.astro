---
import FormattedDate from "./FormattedDate.astro";
import type { CollectionEntry } from "astro:content";

interface Props {
  post: CollectionEntry<"blog">;
}

const { post } = Astro.props;
const { data } = post;
const slug = post.slug ?? post.id;
const tags = data.tags ?? [];
const description = data.description ?? "";
const heroImage = data.heroImage ?? "/og-image.png";
const href = `/blog/${slug}/`;
---

<article class="group flex flex-col rounded-2xl border border-gray-200/80 bg-white shadow-sm transition hover:-translate-y-1 hover:shadow-xl dark:border-gray-700/70 dark:bg-gray-900">
  <a href={href} class="relative block overflow-hidden rounded-t-2xl">
    <img
      src={heroImage}
      width={760}
      height={400}
      loading="lazy"
      decoding="async"
      alt={`Illustration for ${data.title}`}
      class="h-48 w-full object-cover transition duration-300 group-hover:scale-105"
    />
    <div class="pointer-events-none absolute inset-0 bg-gradient-to-t from-black/50 via-transparent"></div>
    <div class="pointer-events-none absolute bottom-3 left-3 text-xs font-semibold uppercase tracking-wide text-white">
      <FormattedDate date={data.pubDate} />
    </div>
  </a>
  <div class="flex flex-1 flex-col gap-3 p-5">
    <a href={href} class="space-y-2">
      <h3 class="text-xl font-semibold text-gray-900 transition group-hover:text-brandingColor dark:text-gray-100">
        {data.title}
      </h3>
      {description && (
        <p class="text-sm text-gray-600 dark:text-gray-400">
          {description}
        </p>
      )}
    </a>
    {tags.length > 0 && (
      <div class="mt-auto flex flex-wrap gap-2">
        {tags.map((tag) => (
          <span class="rounded-full bg-brandingColor/10 px-3 py-1 text-xs font-medium uppercase tracking-wide text-brandingColor dark:bg-brandingColor/20">
            {tag}
          </span>
        ))}
      </div>
    )}
  </div>
</article>
